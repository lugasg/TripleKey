# TripleKey 代码风格指南

## 代码组织

### 文件组织
- 每个功能模块放在独立目录
- 头文件和源文件分离
- 资源文件放在专门的目录

### 文件命名
- 使用小写字母和下划线
- 头文件使用.h后缀
- 源文件使用.cpp后缀
- 文件名应反映其内容

## 代码风格

### 命名规范
1. **变量命名**
   - 使用小写字母和下划线
   - 描述性命名
   - 避免单字母变量名（除循环计数器外）

2. **函数命名**
   - 使用小写字母和下划线
   - 动词开头
   - 清晰表达功能

3. **常量命名**
   - 全大写字母
   - 下划线分隔单词

4. **类型命名**
   - 使用_t后缀
   - 清晰表达类型含义

### 格式规范
1. **缩进**
   - 使用制表符或4个空格
   - 保持一致的缩进风格

2. **空格**
   - 运算符前后加空格
   - 逗号后加空格
   - 函数参数之间加空格

3. **括号**
   - 左括号不换行
   - 右括号独占一行
   - if/for/while等语句必须使用括号

### 注释规范

1. **文件头注释**
```cpp
/**
 * @file filename.h
 * @brief 简要说明
 * @details 详细说明
 * @author 作者
 * @date 创建日期
 */
```

2. **函数注释**
```cpp
/**
 * @brief 函数简要说明
 * @param param1 参数1说明
 * @param param2 参数2说明
 * @return 返回值说明
 */
```

3. **变量注释**
```cpp
// 变量用途说明
int counter;  // 计数器
```

## 最佳实践

### 1. 代码组织
- 相关功能放在一起
- 保持函数简短
- 一个函数只做一件事

### 2. 变量使用
- 变量声明靠近使用处
- 避免全局变量
- 合理使用const

### 3. 错误处理
- 所有错误都要处理
- 使用返回值表示错误
- 提供有意义的错误信息

### 4. 性能考虑
- 避免频繁内存分配
- 使用引用传递大对象
- 合理使用缓存

## 示例

### 好的代码示例
```cpp
void init_display(uint8_t brightness) {
    if (brightness > MAX_BRIGHTNESS) {
        brightness = MAX_BRIGHTNESS;
    }
    
    // 初始化显示
    display.begin();
    display.setBrightness(brightness);
}
```

### 不好的代码示例
```cpp
void do_something() {  // 不好的命名
    int x = 0;  // 不明确的变量名
    // 缺少注释
    for(int i=0;i<10;i++){  // 格式不规范
        x+=i;
    }
}
```
